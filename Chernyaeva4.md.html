<!DOCTYPE html><html><head><meta charset="utf-8"><title>Untitled Document.md</title><style></style></head><body id="preview">
<p class="has-line-data" data-line-start="0" data-line-end="4">Табличные пространства<br>
Создайте новую базу данных.Проверьте, какое табличное пространство по умолчанию установлено для новой базы данных.<br>
Посмотрите в файловой системе символическую ссылкув PGDATA на каталог табличного пространства.<br>
Удалите созданное табличное пространство.</p>
<p class="has-line-data" data-line-start="5" data-line-end="7">Практика Установите параметр rando m_page_cost в значение 1.1для табличного пространства pg_default<br>
Краткая информация:</p>
<ul>
<li class="has-line-data" data-line-start="7" data-line-end="11">Табличные пространства — средство для организации физического хранения данных * Логическое (базы данных, схемы) и физическое (табличные пространства) разделения данных независимы<br>
Задание 1<br>
Создайте новую базу данных.Проверьте, какое табличное пространство по умолчанию установлено для новой базы данных.</li>
</ul>
<p class="has-line-data" data-line-start="11" data-line-end="15">=&gt; CREATE DATABASE db;<br>
=&gt; SELECT spcname<br>
FROM pg_tablespace<br>
WHERE oid = (SELECT dattablespace FROM pg_database WHERE datname = ‘db’);</p>
<p class="has-line-data" data-line-start="16" data-line-end="21">Табличное пространство по умолчанию — ts.<br>
Вывод: табличное пространство по умолчанию определяется шаблоном, из которого клонируется новая база данных.<br>
Результат: <img src="https://sun9-41.userapi.com/impg/QkCJE3N7KzvrcX8ekHy4iAaCcBwsuFZ2XKT12Q/ReLDt4dFPQA.jpg?size=495x206&amp;quality=96&amp;sign=833de8646a47bef73e4c951744378156&amp;type=album" alt="alt-текст" title="Текст заголовка логотипа 1"><br>
Задание 2<br>
Посмотрите в файловой системе символическую ссылкув PGDATA на каталог табличного пространства</p>
<p class="has-line-data" data-line-start="22" data-line-end="24">=&gt; SELECT oid AS tsoid FROM pg_tablespace WHERE spcname = ‘ts’;<br>
student$ sudo ls -l /var/lib/postgresql/13/main/pg_tblspc/16703</p>
<p class="has-line-data" data-line-start="25" data-line-end="26">Результат: <img src="https://sun9-54.userapi.com/impg/Pcv6dL6-zfife0uAo-28TaKDinMBkhuMnBjgRA/voPIkCQUS5g.jpg?size=489x67&amp;quality=96&amp;sign=7bdb2d7883955e8f47b346848d17c938&amp;type=album" alt="alt-текст" title="Текст заголовка логотипа 1"></p>
<h3 class="code-line" data-line-start=26 data-line-end=27><a id="_3_____26"></a>Задание 3 Удалите созданное табличное пространство.</h3>
<p class="has-line-data" data-line-start="27" data-line-end="29"><code>sh =&gt; ALTER DATABASE template1 SET TABLESPACE pg_default; =&gt; DROP DATABASE db; =&gt; DROP TABLESPACE ts;</code><br>
Результат: alt-текст</p>
<p class="has-line-data" data-line-start="30" data-line-end="32">Практика +<br>
Получите список представлений в схеме information_schema.</p>
<p class="has-line-data" data-line-start="33" data-line-end="36">=&gt; SELECT name, setting<br>
FROM pg_settings<br>
WHERE name IN (‘seq_page_cost’,‘random_page_cost’);</p>
<p class="has-line-data" data-line-start="37" data-line-end="43">Если используются диски с разными характеристиками, для них можно создать разные табличные пространства и настроить подходящие соотношения этих параметров. Например для быстрых SSD-дисков значение random_page_cost можно уменьшить практически до значения seq_page_cost.<br>
<code>sh =&gt; ALTER TABLESPACE pg_default SET (random_page_cost = 1.1);</code><br>
Настройки, сделанные командой ALTER TABLESPACE, сохраняются в таблице pg_tablespace. Их можно посмотреть в psql следующей командой:<br>
<code>sh =&gt; \db+</code><br>
Параметры *_cost можно установить и в postgresql.conf. Тогда они будут действовать для всех табличных пространств.<br>
Результат: <img src="https://sun2-11.userapi.com/impg/Gpyh-F8u4gQ9i9NhIn7IFNuZc3LPCCvN-4t64g/tEsmCIL0wao.jpg?size=485x302&amp;quality=96&amp;sign=8f08256e6e120478fca30871361e1fc6&amp;type=album" alt="alt-текст" title="Текст заголовка логотипа 1"></p>
</body></html>